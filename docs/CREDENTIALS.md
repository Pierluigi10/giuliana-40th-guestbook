# Admin and VIP User Credentials

**SECURITY WARNING**: This file contains sensitive user credential information.
- **DO NOT commit this file to Git if it contains real passwords**
- Store real passwords in a password manager (1Password, Bitwarden, LastPass, etc.)
- This file is tracked by Git for documentation purposes, but should only contain placeholders

---

## Admin User (Pierluigi)

**Role**: Administrator
**Permissions**:
- Approve/reject guest users
- Moderate content (approve/reject uploads)
- View all content (approved and pending)
- Access admin dashboard at `/approve-users` and `/approve-content`

### Credentials

| Field | Value | Notes |
|-------|-------|-------|
| Email | `your-admin-email@example.com` | Replace with real email |
| Password | `[STORE IN PASSWORD MANAGER]` | Min 12 characters, use strong password generator |
| Profile ID | `[AUTO-GENERATED BY SUPABASE]` | UUID generated on user creation |
| Role | `admin` | Set via `promote_to_admin()` function |
| Approved | `true` | Auto-approved on promotion |

### How to Access

1. Go to: `https://your-domain.com/login` (or `http://localhost:3000/login` for dev)
2. Enter admin email and password
3. Click "Accedi"
4. You will be redirected to `/approve-users` (admin dashboard)

---

## VIP User (Giuliana)

**Role**: VIP Guest
**Permissions**:
- View approved content only in gallery
- React with emoji to content
- Access gallery at `/gallery`
- Cannot see pending/rejected content
- Cannot approve users or content

### Credentials

| Field | Value | Notes |
|-------|-------|-------|
| Email | `giuliana@example.com` | Replace with Giuliana's real email |
| Password | `[STORE IN PASSWORD MANAGER]` | Min 12 characters, communicate securely to Giuliana |
| Profile ID | `[AUTO-GENERATED BY SUPABASE]` | UUID generated on user creation |
| Role | `vip` | Set via `promote_to_vip()` function |
| Approved | `true` | Auto-approved on promotion |

### How to Access

1. Go to: `https://your-domain.com/login`
2. Enter VIP email and password
3. Click "Accedi"
4. You will be redirected to `/gallery` (VIP-only view)

### How to Share Password with Giuliana

**Secure methods** (choose one):
- Send via password manager shared vault (1Password, Bitwarden)
- Send via encrypted messaging (Signal, WhatsApp with disappearing messages)
- Communicate in person

**Insecure methods** (avoid):
- ❌ Plain email
- ❌ SMS (can be intercepted)
- ❌ Unencrypted messaging apps

---

## Test Guest Users (Optional)

For testing the approval workflow, you can create test guest users:

| Email | Password | Role | Purpose |
|-------|----------|------|---------|
| `guest1@example.com` | `TestPass123!` | `guest` | Test user approval flow |
| `guest2@example.com` | `TestPass123!` | `guest` | Test content moderation flow |
| `guest3@example.com` | `TestPass123!` | `guest` | Test VIP gallery viewing |

**How to create test guests**:
1. Visit `/register` page
2. Fill in email, full name, password
3. Click "Registrati"
4. User status will be `pending` until admin approves
5. As admin, go to `/approve-users` and click "Approva"

---

## Password Requirements

All passwords must meet these criteria:
- Minimum 8 characters (12+ recommended for admin/VIP)
- Contains at least one uppercase letter
- Contains at least one lowercase letter
- Contains at least one number
- No common passwords (e.g., "Password123")

**Password strength examples**:
- ❌ Weak: `password123`, `giuliana40`, `admin2025`
- ⚠️ Medium: `Giuliana40!`, `Admin2025Pass`
- ✅ Strong: `Kx9#mL2pQz7@vN4w`, `correct-horse-battery-staple`

**Recommended**: Use a password manager's password generator to create strong random passwords.

---

## How to Reset Passwords

### Method 1: Supabase Dashboard (Admin resets user password)

1. Go to: Supabase Dashboard → Authentication → Users
2. Find the user by email
3. Click the 3 dots next to the user → "Reset password"
4. Copy the temporary password
5. Communicate it securely to the user
6. User should change it immediately after first login

### Method 2: Self-Service Password Reset (Future Enhancement)

*Not yet implemented in MVP. Add "Forgot Password" feature in future sprint.*

---

## Verification Queries

### Check all users and their roles

```sql
-- Execute in Supabase SQL Editor
SELECT
  email,
  role,
  is_approved,
  created_at,
  updated_at
FROM profiles
ORDER BY
  CASE role
    WHEN 'admin' THEN 1
    WHEN 'vip' THEN 2
    WHEN 'guest' THEN 3
  END,
  created_at;
```

### Check admin user exists

```sql
SELECT * FROM profiles WHERE role = 'admin';
```

Expected result: 1 row with `is_approved = true`

### Check VIP user exists

```sql
SELECT * FROM profiles WHERE role = 'vip';
```

Expected result: 1 row with `is_approved = true`

### Count users by role

```sql
SELECT
  role,
  COUNT(*) as count,
  COUNT(*) FILTER (WHERE is_approved = true) as approved_count
FROM profiles
GROUP BY role;
```

---

## Security Best Practices

### For Admin (Pierluigi)

1. ✅ Use a unique, strong password (12+ characters)
2. ✅ Store password in password manager
3. ✅ Enable 2FA on Supabase Dashboard account
4. ✅ Never share admin credentials
5. ✅ Log out after each session (especially on shared devices)
6. ✅ Review user approvals regularly (check for suspicious registrations)

### For VIP (Giuliana)

1. ✅ Use a unique, strong password (12+ characters)
2. ✅ Don't reuse password from other sites
3. ✅ Keep password private (don't share with guests)
4. ✅ Log out if accessing from public/shared devices

### For Guest Users

1. ✅ Use a reasonably strong password (8+ characters)
2. ✅ Provide real name during registration (helps admin identify users)
3. ✅ Don't create multiple accounts (will be detected and blocked)

---

## Troubleshooting

### "Invalid login credentials" error

**Possible causes**:
1. Wrong email or password
2. User not created yet in Supabase
3. Email not confirmed (should be auto-confirmed)

**Solutions**:
1. Double-check email and password (check for typos)
2. Verify user exists in Supabase Dashboard → Authentication → Users
3. If user exists but can't login, reset password via Dashboard

### Admin redirected to `/gallery` instead of `/approve-users`

**Cause**: User role is not `admin` in database

**Solution**:
```sql
-- Execute in Supabase SQL Editor
SELECT promote_to_admin('your-admin-email@example.com');

-- Verify
SELECT email, role FROM profiles WHERE email = 'your-admin-email@example.com';
```

### VIP cannot see any content

**Possible causes**:
1. No content has been approved yet
2. VIP role not set correctly
3. Content visibility issue

**Solutions**:
1. As admin, go to `/approve-content` and approve some content
2. Verify VIP role:
   ```sql
   SELECT email, role FROM profiles WHERE email = 'giuliana@example.com';
   ```
3. Check content approval status:
   ```sql
   SELECT COUNT(*) FROM content WHERE is_approved = true;
   ```

---

## Backup Access

### If admin loses access

**Recovery options**:
1. Access Supabase Dashboard directly (requires Supabase account login)
2. Use SQL Editor to reset admin password
3. Create a new admin user via SQL:
   ```sql
   -- Create new admin (user must exist in auth.users first)
   SELECT promote_to_admin('backup-admin@example.com');
   ```

### If Supabase Dashboard access lost

**Recovery options**:
1. Use "Forgot Password" on Supabase login page
2. Check email for password reset link
3. If no access to email, contact Supabase support

---

## Production Deployment Checklist

Before deploying to production:

- [ ] Change all default passwords to strong, unique passwords
- [ ] Store all credentials in password manager
- [ ] Remove test users from database
- [ ] Enable 2FA on Supabase Dashboard account
- [ ] Verify admin email is real and accessible
- [ ] Verify VIP email is real and accessible
- [ ] Test login for both admin and VIP
- [ ] Document password reset procedure
- [ ] Share VIP credentials securely with Giuliana
- [ ] Remove any hardcoded credentials from code
- [ ] Verify `.env.local` is in `.gitignore`
- [ ] Verify this file (`CREDENTIALS.md`) does NOT contain real passwords

---

## Support

If you encounter issues with user authentication or credentials:

1. Check this documentation first
2. Review Supabase Authentication logs: Dashboard → Authentication → Logs
3. Check application logs in Vercel: Dashboard → Project → Logs
4. Consult Supabase Auth docs: https://supabase.com/docs/guides/auth
5. Test with a new test user to isolate the issue

---

**Last Updated**: 2026-01-23
**Maintained By**: Pierluigi Baiano
